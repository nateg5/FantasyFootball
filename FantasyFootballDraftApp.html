<html>
  <head>
    <style>
      table {
        border-collapse: collapse;
        float: left;
        margin: 10px;
      }
      table td {
        border: 1px solid #888;
        padding: 10px;
      }
      .heading {
        font-weight: bold;
        background-color: #eee;
      }
    </style>
  </head>
  <body>
    <script>
      let QB = 0, RB = 1, WR = 2, TE = 3, FL = 4, K = 5, DEF = 6;
      let rawData = [
      {name: "Josh Allen Buf", positions: [QB], points: 487.88, available: true},
{name: "Patrick Mahomes KC", positions: [QB], points: 452.9, available: true},
{name: "Justin Herbert LAC", positions: [QB], points: 451.53, available: true},
{name: "Tom Brady TB", positions: [QB], points: 422.42, available: true},
{name: "Joe Burrow Cin", positions: [QB], points: 417.17, available: true},
{name: "Lamar Jackson Bal", positions: [QB], points: 409.72, available: true},
{name: "Kyler Murray Ari", positions: [QB], points: 408.82, available: true},
{name: "Aaron Rodgers GB", positions: [QB], points: 402.26, available: true},
{name: "Russell Wilson Den", positions: [QB], points: 401.06, available: true},
{name: "Dak Prescott Dal", positions: [QB], points: 397.19, available: true},
{name: "Matthew Stafford LAR", positions: [QB], points: 395.02, available: true},
{name: "Jameis Winston NO", positions: [QB], points: 388.12, available: true},
{name: "Jalen Hurts Phi", positions: [QB], points: 386.73, available: true},
{name: "Mac Jones NE", positions: [QB], points: 372.7, available: true},
{name: "Derek Carr LV", positions: [QB], points: 367.5, available: true},
{name: "Kirk Cousins Min", positions: [QB], points: 363.94, available: true},
{name: "Trey Lance SF", positions: [QB], points: 358.91, available: true},
{name: "Tua Tagovailoa Mia", positions: [QB], points: 346.11, available: true},
{name: "Jared Goff Det", positions: [QB], points: 343.88, available: true},
{name: "Justin Fields Chi", positions: [QB], points: 340.13, available: true},
{name: "Jonathan Taylor Ind", positions: [RB,FL], points: 334.19, available: true},
{name: "Austin Ekeler LAC", positions: [RB,FL], points: 333.93, available: true},
{name: "Saquon Barkley NYG", positions: [RB,FL], points: 328.12, available: true},
{name: "Trevor Lawrence Jax", positions: [QB], points: 326.76, available: true},
{name: "Cooper Kupp LAR", positions: [WR,FL], points: 322.92, available: true},
{name: "Matt Ryan Ind", positions: [QB], points: 320.62, available: true},
{name: "Ryan Tannehill Ten", positions: [QB], points: 315.29, available: true},
{name: "Christian McCaffrey Car", positions: [RB,FL], points: 313.87, available: true},
{name: "Justin Jefferson Min", positions: [WR,FL], points: 309.08, available: true},
{name: "Carson Wentz Was", positions: [QB], points: 302.71, available: true},
{name: "Daniel Jones NYG", positions: [QB], points: 302.42, available: true},
{name: "D'Andre Swift Det", positions: [RB,FL], points: 301.22, available: true},
{name: "Ja'Marr Chase Cin", positions: [WR,FL], points: 300.92, available: true},
{name: "Alvin Kamara NO", positions: [RB,FL], points: 296.06, available: true},
{name: "Joe Mixon Cin", positions: [RB,FL], points: 293.51, available: true},
{name: "Stefon Diggs Buf", positions: [WR,FL], points: 291.43, available: true},
{name: "Dalvin Cook Min", positions: [RB,FL], points: 287.95, available: true},
{name: "Najee Harris Pit", positions: [RB,FL], points: 284.73, available: true},
{name: "Leonard Fournette TB", positions: [RB,FL], points: 283.48, available: true},
{name: "Derrick Henry Ten", positions: [RB,FL], points: 282.42, available: true},
{name: "Travis Kelce KC", positions: [TE,FL], points: 275.33, available: true},
{name: "Davante Adams LV", positions: [WR,FL], points: 275.32, available: true},
{name: "Mike Evans TB", positions: [WR,FL], points: 273.43, available: true},
{name: "CeeDee Lamb Dal", positions: [WR,FL], points: 271.07, available: true},
{name: "James Conner Ari", positions: [RB,FL], points: 270.63, available: true},
{name: "Aaron Jones GB", positions: [RB,FL], points: 265.37, available: true},
{name: "Deebo Samuel SF", positions: [WR,FL], points: 264.76, available: true},
{name: "Ezekiel Elliott Dal", positions: [RB,FL], points: 260.83, available: true},
{name: "Courtland Sutton Den", positions: [WR,FL], points: 260.19, available: true},
{name: "Keenan Allen LAC", positions: [WR,FL], points: 258.04, available: true},
{name: "A.J. Brown Phi", positions: [WR,FL], points: 256.37, available: true},
{name: "Tyreek Hill Mia", positions: [WR,FL], points: 255.8, available: true},
{name: "Nick Chubb Cle", positions: [RB,FL], points: 254.91, available: true},
{name: "Tee Higgins Cin", positions: [WR,FL], points: 254.89, available: true},
{name: "David Montgomery Chi", positions: [RB,FL], points: 253.92, available: true},
{name: "Cam Akers LAR", positions: [RB,FL], points: 248.86, available: true},
{name: "Eli Mitchell SF", positions: [RB,FL], points: 247.52, available: true},
{name: "Javonte Williams Den", positions: [RB,FL], points: 247.03, available: true},
{name: "Michael Thomas NO", positions: [WR,FL], points: 245.76, available: true},
{name: "Mark Andrews Bal", positions: [TE,FL], points: 245.08, available: true},
{name: "Diontae Johnson Pit", positions: [WR,FL], points: 241.21, available: true},
{name: "Chase Edmonds Mia", positions: [RB,FL], points: 240.22, available: true},
{name: "Allen Robinson II LAR", positions: [WR,FL], points: 239.8, available: true},
{name: "Mike Williams LAC", positions: [WR,FL], points: 237.95, available: true},
{name: "JuJu Smith-Schuster KC", positions: [WR,FL], points: 236.43, available: true},
{name: "Michael Pittman Jr. Ind", positions: [WR,FL], points: 235.1, available: true},
{name: "Jerry Jeudy Den", positions: [WR,FL], points: 233.65, available: true},
{name: "Terry McLaurin Was", positions: [WR,FL], points: 232.81, available: true},
{name: "Adam Thielen Min", positions: [WR,FL], points: 231.87, available: true},
{name: "DJ Moore Car", positions: [WR,FL], points: 227.57, available: true},
{name: "Christian Kirk Jax", positions: [WR,FL], points: 227.11, available: true},
{name: "Antonio Gibson Was", positions: [RB,FL], points: 226.07, available: true},
{name: "Gabriel Davis Buf", positions: [WR,FL], points: 225.26, available: true},
{name: "Rhamondre Stevenson NE", positions: [RB,FL], points: 223.56, available: true},
{name: "Jaylen Waddle Mia", positions: [WR,FL], points: 221.19, available: true},
{name: "Marquise Brown Ari", positions: [WR,FL], points: 220.52, available: true},
{name: "Josh Jacobs LV", positions: [RB,FL], points: 217.77, available: true},
{name: "Kadarius Toney NYG", positions: [WR,FL], points: 216.87, available: true},
{name: "Rashod Bateman Bal", positions: [WR,FL], points: 216.65, available: true},
{name: "Kyle Pitts Atl", positions: [TE,FL], points: 215.99, available: true},
{name: "Amon-Ra St. Brown Det", positions: [WR,FL], points: 215.9, available: true},
{name: "J.K. Dobbins Bal", positions: [RB,FL], points: 215.38, available: true},
{name: "Brandin Cooks Hou", positions: [WR,FL], points: 215.13, available: true},
{name: "Chris Godwin TB", positions: [WR,FL], points: 214.01, available: true},
{name: "Hunter Renfrow LV", positions: [WR,FL], points: 211.53, available: true},
{name: "Amari Cooper Cle", positions: [WR,FL], points: 211.13, available: true},
{name: "Darren Waller LV", positions: [TE,FL], points: 211, available: true},
{name: "Evan McPherson Cin", positions: [K], points: 210.25, available: true},
{name: "Elijah Moore NYJ", positions: [WR,FL], points: 209.1, available: true},
{name: "Justin Tucker Bal", positions: [K], points: 209.04, available: true},
{name: "Darnell Mooney Chi", positions: [WR,FL], points: 208.79, available: true},
{name: "Matt Gay LAR", positions: [K], points: 206.64, available: true},
{name: "DK Metcalf Sea", positions: [WR,FL], points: 206.48, available: true},
{name: "T.J. Hockenson Det", positions: [TE,FL], points: 205.58, available: true},
{name: "Dallas Goedert Phi", positions: [TE,FL], points: 204.97, available: true},
{name: "AJ Dillon GB", positions: [RB,FL], points: 204.68, available: true},
{name: "Robert Woods Ten", positions: [WR,FL], points: 202.63, available: true},
{name: "George Kittle SF", positions: [TE,FL], points: 202.3, available: true},
{name: "DeVonta Smith Phi", positions: [WR,FL], points: 202.24, available: true},
{name: "Tyler Bass Buf", positions: [K], points: 201.38, available: true},
{name: "Travis Etienne Jr. Jax", positions: [RB,FL], points: 199.62, available: true},
{name: "Tyler Lockett Sea", positions: [WR,FL], points: 199, available: true},
{name: "Daniel Carlson LV", positions: [K], points: 198.12, available: true},
{name: "Devin Singletary Buf", positions: [RB,FL], points: 195.78, available: true},
{name: "Dalton Schultz Dal", positions: [TE,FL], points: 195.37, available: true},
{name: "Zach Ertz Ari", positions: [TE,FL], points: 193.01, available: true},
{name: "Clyde Edwards-Helaire KC", positions: [RB,FL], points: 192.55, available: true},
{name: "Harrison Butker KC", positions: [K], points: 192.24, available: true},
{name: "Isaiah McKenzie Buf", positions: [WR,FL], points: 192.21, available: true},
{name: "Matt Prater Ari", positions: [K], points: 189.51, available: true},
{name: "Chase Claypool Pit", positions: [WR,FL], points: 188.6, available: true},
{name: "Damien Harris NE", positions: [RB,FL], points: 187.77, available: true},
{name: "Kareem Hunt Cle", positions: [RB,FL], points: 187.51, available: true},
{name: "Brandon Aiyuk SF", positions: [WR,FL], points: 187.5, available: true},
{name: "Breece Hall NYJ", positions: [RB,FL], points: 186.84, available: true},
{name: "Brandon McManus Den", positions: [K], points: 186.55, available: true},
{name: "Rashaad Penny Sea", positions: [RB,FL], points: 186.24, available: true},
{name: "Nick Folk NE", positions: [K], points: 185.08, available: true},
{name: "Allen Lazard GB", positions: [WR,FL], points: 183.64, available: true},
{name: "Dustin Hopkins LAC", positions: [K], points: 182.98, available: true},
{name: "Drake London Atl", positions: [WR,FL], points: 182.57, available: true},
{name: "Melvin Gordon III Den", positions: [RB,FL], points: 182.5, available: true},
{name: "Ryan Succop TB", positions: [K], points: 179.89, available: true},
{name: "Tony Pollard Dal", positions: [RB,FL], points: 179.68, available: true},
{name: "Robbie Gould SF", positions: [K], points: 179.63, available: true},
{name: "Austin Seibert Det", positions: [K], points: 178.38, available: true},
{name: "Miles Sanders Phi", positions: [RB,FL], points: 178.21, available: true},
{name: "Cordarrelle Patterson Atl", positions: [RB,FL], points: 178.07, available: true},
{name: "Michael Gallup Dal", positions: [WR,FL], points: 177.14, available: true},
{name: "Cole Kmet Chi", positions: [TE,FL], points: 176.5, available: true},
{name: "Chris Boswell Pit", positions: [K], points: 176.11, available: true},
{name: "Mike Gesicki Mia", positions: [TE,FL], points: 175.77, available: true},
{name: "Dawson Knox Buf", positions: [TE,FL], points: 175.6, available: true},
{name: "Treylon Burks Ten", positions: [WR,FL], points: 175.36, available: true},
{name: "Skyy Moore KC", positions: [WR,FL], points: 174.27, available: true},
{name: "Jake Elliott Phi", positions: [K], points: 173.3, available: true},
{name: "Younghoe Koo Atl", positions: [K], points: 173.07, available: true},
{name: "DeAndre Hopkins Ari", positions: [WR,FL], points: 173.06, available: true},
{name: "Jason Sanders Mia", positions: [K], points: 172.37, available: true},
{name: "Randy Bullock Ten", positions: [K], points: 172.15, available: true},
{name: "Wil Lutz NO", positions: [K], points: 171.31, available: true},
{name: "Greg Zuerlein NYJ", positions: [K], points: 171.29, available: true},
{name: "Graham Gano NYG", positions: [K], points: 169.55, available: true},
{name: "Sammy Watkins GB", positions: [WR,FL], points: 169.19, available: true},
{name: "Mason Crosby GB", positions: [K], points: 168.6, available: true},
{name: "Tristan Vizcaino NE", positions: [K], points: 168.36, available: true},
{name: "Greg Joseph Min", positions: [K], points: 166.47, available: true},
{name: "Albert Okwuegbunam Den", positions: [TE,FL], points: 163.04, available: true},
{name: "Brett Maher Dal", positions: [K], points: 162.79, available: true},
{name: "David Njoku Cle", positions: [TE,FL], points: 161.93, available: true},
{name: "Pat Freiermuth Pit", positions: [TE,FL], points: 161.83, available: true},
{name: "Kenneth Gainwell Phi", positions: [RB,FL], points: 161.57, available: true},
{name: "Irv Smith Jr. Min", positions: [TE,FL], points: 158.93, available: true},
{name: "Michael Carter NYJ", positions: [RB,FL], points: 156.83, available: true},
{name: "Nyheim Hines Ind", positions: [RB,FL], points: 156.52, available: true},
{name: "Dameon Pierce Hou", positions: [RB,FL], points: 156.01, available: true},
{name: "Hunter Henry NE", positions: [TE,FL], points: 154.08, available: true},
{name: "Austin Hooper Ten", positions: [TE,FL], points: 152.83, available: true},
{name: "Tyler Higbee LAR", positions: [TE,FL], points: 152.05, available: true},
{name: "Buffalo Buf", positions: [DEF], points: 143.48, available: true},
{name: "Robert Tonyan GB", positions: [TE,FL], points: 141.65, available: true},
{name: "J.D. McKissic Was", positions: [RB,FL], points: 141.6, available: true},
{name: "James Cook Buf", positions: [RB,FL], points: 141.13, available: true},
{name: "Logan Thomas Was", positions: [TE,FL], points: 139.09, available: true},
{name: "Noah Fant Sea", positions: [TE,FL], points: 137.94, available: true},
{name: "Kenneth Walker III Sea", positions: [RB,FL], points: 135.84, available: true},
{name: "Hayden Hurst Cin", positions: [TE,FL], points: 126.28, available: true},
{name: "Gerald Everett LAC", positions: [TE,FL], points: 126.23, available: true},
{name: "Tampa Bay TB", positions: [DEF], points: 121.68, available: true},
{name: "Los Angeles LAR", positions: [DEF], points: 119.68, available: true},
{name: "Alexander Mattison Min", positions: [RB,FL], points: 119.05, available: true},
{name: "Darrell Henderson Jr. LAR", positions: [RB,FL], points: 118.79, available: true},
{name: "Dallas Dal", positions: [DEF], points: 118.49, available: true},
{name: "San Francisco SF", positions: [DEF], points: 118.18, available: true},
{name: "Brevin Jordan Hou", positions: [TE,FL], points: 113.8, available: true},
{name: "Baltimore Bal", positions: [DEF], points: 111.89, available: true},
{name: "Green Bay GB", positions: [DEF], points: 110.41, available: true},
{name: "New Orleans NO", positions: [DEF], points: 110.35, available: true},
{name: "Denver Den", positions: [DEF], points: 108.56, available: true},
{name: "New England NE", positions: [DEF], points: 107.66, available: true},
{name: "Los Angeles LAC", positions: [DEF], points: 105.41, available: true},
{name: "Indianapolis Ind", positions: [DEF], points: 105.02, available: true},
{name: "Cincinnati Cin", positions: [DEF], points: 105.01, available: true},
{name: "Ronald Jones II KC", positions: [RB,FL], points: 104.9, available: true},
{name: "Jamaal Williams Det", positions: [RB,FL], points: 104.31, available: true},
{name: "Isaiah Spiller LAC", positions: [RB,FL], points: 103.87, available: true},
{name: "Khalil Herbert Chi", positions: [RB,FL], points: 103.39, available: true},
{name: "Kansas City KC", positions: [DEF], points: 102.46, available: true},
{name: "Cleveland Cle", positions: [DEF], points: 101.47, available: true},
{name: "Tennessee Ten", positions: [DEF], points: 101.36, available: true},
{name: "Philadelphia Phi", positions: [DEF], points: 101.33, available: true},
{name: "James Robinson Jax", positions: [RB,FL], points: 99.89, available: true},
{name: "Miami Mia", positions: [DEF], points: 99.26, available: true},
{name: "Minnesota Min", positions: [DEF], points: 98.23, available: true},
{name: "Pittsburgh Pit", positions: [DEF], points: 97.94, available: true},
{name: "Las Vegas LV", positions: [DEF], points: 96.54, available: true},
{name: "Arizona Ari", positions: [DEF], points: 96.38, available: true},
{name: "Washington Was", positions: [DEF], points: 96.16, available: true},
{name: "Carolina Car", positions: [DEF], points: 91.38, available: true},
{name: "New York NYG", positions: [DEF], points: 85.78}
      ];
      let rawDataPositionsMap = [
        [],
        [],
        [],
        [],
        [],
        [],
        []
      ];
      console.log(rawData);

      let searchArray = location.search.substring(1).split("&");
      let params = {};
      for(let i in searchArray) {
        let param = searchArray[i].split("=");
        params[param[0]] = Number(param[1]);
      }
      let numberOfTeams = params.numberOfTeams || 10;
      let minimaxMaxTime = params.minimaxMaxTime || 100;

      let numberOfStarters = 9;
      let defaultPositions = [QB, RB, RB, WR, WR, TE, FL, K, DEF, QB, RB, WR, TE, FL, K, DEF];
      let possiblePositionsMapStarters = [
        1,
        2,
        2,
        1,
        1,
        1,
        1
      ];
      let possiblePositionsMapBench = [
        1,
        1,
        1,
        1,
        1,
        1,
        1
      ];
      let bestAvailablePlayerMap = [];
      let draftResults = [];

      for(let i = 0; i < rawData.length; i++) {
        rawData[i].positionsString = "" + rawData[i].positions;
        rawData[i].nextPlayer = {};
        for(let j = 0; j < rawData[i].positions.length; j++) {
          rawDataPositionsMap[rawData[i].positions[j]].push(rawData[i]);
          let lastIndex = rawDataPositionsMap[rawData[i].positions[j]].length - 1;
          if(lastIndex > 0) {
            rawDataPositionsMap[rawData[i].positions[j]][lastIndex - 1].nextPlayer[rawData[i].positions[j]] = rawDataPositionsMap[rawData[i].positions[j]][lastIndex];
          } else {
            bestAvailablePlayerMap[rawData[i].positions[j]] = rawData[i];
          }
        }
      }
      console.log(rawDataPositionsMap);
      console.log(bestAvailablePlayerMap);

      for(let i = 0; i < numberOfTeams; i++) {
        draftResults.push([]);
      }

      function getTeamTotal(teamIndex) {
        let totalPoints = 0;
        for(let i = 0; i < draftResults[teamIndex].length; i++) {
          totalPoints += draftResults[teamIndex][i].points;
        }
        return Math.floor(totalPoints);
      }

      function getCheckboxId(teamIndex, playerIndex) {
        return "team_" + teamIndex + "_player_" + playerIndex;
      }

      function getTeamId(teamIndex) {
        return "team_" + teamIndex;
      }

      function updateTeamTotal(teamIndex) {
        document.getElementById(getTeamId(teamIndex)).innerHTML = getTeamTotal(teamIndex);
      }

      function updateDraftBoard(teamIndex, playerIndex) {
        if(document.getElementById(getCheckboxId(teamIndex, playerIndex)).checked) {
          let draftIndex = draftResults[teamIndex].indexOf(rawData[playerIndex]);
          if(draftIndex < 0) {
            draftPlayer(teamIndex, rawData[playerIndex]);
          }
        } else {
          let draftIndex = draftResults[teamIndex].indexOf(rawData[playerIndex]);
          if(draftIndex >= 0) {
            undraftPlayer(teamIndex, draftIndex);
          }
        }
        for(let i = 0; i < defaultPositions.length; i++) {
          document.getElementById(getDraftId(teamIndex, i)).innerHTML = "";
        }
        for(let i = 0; i < draftResults[teamIndex].length; i++) {
          document.getElementById(getDraftId(teamIndex, i)).innerHTML = draftResults[teamIndex][i].name + " " + draftResults[teamIndex][i].positions;
        }
      }

      function update(teamIndex, playerIndex) {
        updateDraftBoard(teamIndex, playerIndex);
        updateTeamTotal(teamIndex);
      }

      let missingPositionsMap = {};
      function buildMissingPositions(teamPlayers, index, lineup, missingPositions) {
        let positionHash = "";
        if(index === 0) {
          positionHash = buildPositionHash(teamPlayers);
          if(missingPositionsMap[positionHash]) {
            return missingPositionsMap[positionHash];
          }
        }

        if(index < teamPlayers.length) {
          for(let i = 0; i < teamPlayers[index].positions.length; i++) {
            lineup.push(teamPlayers[index].positions[i]);
            missingPositions = buildMissingPositions(teamPlayers, index + 1, lineup, missingPositions);
            lineup.pop();
          }
        } else {
          if(isLineupValid(lineup)) {
            missingPositions.push(...getMissingPositions(lineup));
          }
        }

        return reduceMissingPositions(index, missingPositions, positionHash);
      }

      function buildPositionHash(teamPlayers) {
        let str = "";
        for(let i = 0; i < teamPlayers.length; i++) {
          str += teamPlayers[i].positionsString;
        }
        return str;
      }

      function isLineupValid(lineup) {
        let lineupPositionsMapStarters = [
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ];
        let lineupPositionsMapBench = [
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ];
        for(let i = 0; i < lineup.length; i++) {
          let position = lineup[i];
          if(i < numberOfStarters) {
            lineupPositionsMapStarters[position]++;
          } else {
            lineupPositionsMapBench[position]++;
          }
        }
        for(key in lineupPositionsMapStarters) {
          if(lineupPositionsMapStarters[key] > possiblePositionsMapStarters[key]) {
            return false;
          }
        }
        for(key in lineupPositionsMapBench) {
          if(lineupPositionsMapBench[key] > possiblePositionsMapBench[key]) {
            return false;
          }
        }
        return true;
      }

      function reduceMissingPositions(index, missingPositions, positionHash) {
        if(index === 0) {
          missingPositions = missingPositions.filter((x, i, a) => {return a.indexOf(x) === i;});
          missingPositionsMap[positionHash] = missingPositions;
        }

        return missingPositions;
      }

      function getMissingPositions(lineup) {
        let positions = defaultPositions.slice(0, numberOfStarters);
        for(let i = 0; i < lineup.length; i++) {
          let index = positions.indexOf(lineup[i]);
          if(index >= 0) {
            positions.splice(index, 1);
          }
        }
        if(positions.length === 0) {
          positions = defaultPositions.slice();
          for(let i = 0; i < lineup.length; i++) {
            let index = positions.indexOf(lineup[i]);
            if(index >= 0) {
              positions.splice(index, 1);
            }
          }
        }
        return positions;
      }

      function getNextAvailablePlayer(missingPositions) {
        for(let i = 0; i < rawData.length; i++) {
          if(rawData[i].available) {
            let iterations2 = rawData[i].positions.length;
            for(let j = 0; j < iterations2; j++) {
              if(missingPositions.indexOf(rawData[i].positions[j]) >= 0) {
                return rawData[i];
              }
            }
          }
        }
      }

      function getSimplePick(teamIndex) {
        let teamPlayers = draftResults[teamIndex];
        let missingPositions = [];
        missingPositions = buildMissingPositions(teamPlayers, 0, [], missingPositions);
        let simplePick = getNextAvailablePlayer(missingPositions);
        return simplePick;
      }

      function getAvailablePlayerMoves(teamIndex, maxMoves) {
        let teamPlayers = draftResults[teamIndex];
        let missingPositions = [];
        missingPositions = buildMissingPositions(teamPlayers, 0, [], missingPositions);
        return buildMoves(missingPositions, maxMoves);
      }

      function buildMoves(missingPositions, maxMoves) {
        let moves = [];
        for(let i = 0; i < missingPositions.length; i++) {
          let positionsMap = rawDataPositionsMap[missingPositions[i]];
          for(let j = 0; j < positionsMap.length; j++) {
            let playerData = positionsMap[j];
            if(playerData.available === true) {
              if(moves.indexOf(playerData) < 0) {
                moves.push(playerData);
                break;
              }
              break;
            }
          }
        }

        moves.sort((a, b) => {
          return b.points - a.points;
        });

        moves = moves.slice(0, maxMoves);

        return moves;
      }

      function draftPlayer(teamIndex, playerData) {
        draftResults[teamIndex].push(playerData);
        playerData.available = false;
      }

      function undraftPlayer(teamIndex, draftIndex) {
        let playerData = {};
        if(draftIndex === draftResults[teamIndex].length - 1) {
          playerData = draftResults[teamIndex].pop();
        } else {
          playerData = draftResults[teamIndex].splice(draftIndex, 1)[0];
        }
        playerData.available = true;
      }

      let INFINITY = 1000000;
      let bestMove = "";
      function getMinimaxPick(depth, alpha, beta, teamIndex, maxDepth, maxTeamIndex, direction, movesToUse) {
        let moves = [];

        if(depth !== 0) {
          moves = getAvailablePlayerMoves(teamIndex, movesToUse > 1 ? movesToUse : 1);
        }

        if(depth === 0 || moves.length === 0) {
          return getTeamTotal(maxTeamIndex);
        }

        let nextDirection = direction;
        let nextTeamIndex = teamIndex + direction;
        let nextDepth = depth - 1;
        if(nextTeamIndex === numberOfTeams || nextTeamIndex === -1) {
          nextDirection = -nextDirection;
          nextTeamIndex = nextTeamIndex + nextDirection;
        }

        if(teamIndex === maxTeamIndex) {
          let value = -INFINITY;
          for(let i = 0; i < moves.length; i++) {
            draftPlayer(teamIndex, moves[i]);
            let minimaxValue = getMinimaxPick(nextDepth, alpha, beta, nextTeamIndex, maxDepth, maxTeamIndex, nextDirection, movesToUse - 1);
            if(depth === maxDepth) {
              console.log("value", minimaxValue);
              console.log("move", moves[i]);
            }
            if(minimaxValue > value) {
              value = minimaxValue;
              if(depth === maxDepth) {
                bestMove = moves[i];
              }
            }
            undraftPlayer(teamIndex, draftResults[teamIndex].length - 1);
            alpha = Math.max(alpha, value);
            if(value >= beta) {
              break;
            }
          }
          return value;
        } else {
          let value = INFINITY;
          for(let i = 0; i < moves.length; i++) {
            draftPlayer(teamIndex, moves[i]);
            let minimaxValue = getMinimaxPick(nextDepth, alpha, beta, nextTeamIndex, maxDepth, maxTeamIndex, nextDirection, movesToUse - 1);
            if(minimaxValue < value) {
              value = minimaxValue;
            }
            undraftPlayer(teamIndex, draftResults[teamIndex].length - 1);
            beta = Math.min(beta, value);
            if(value <= alpha) {
              break;
            }
          }
          return value;
        }
      }

      function autoCheckPlayer(teamIndex, playerData) {
        for(let i = 0; i < rawData.length; i++) {
          if(rawData[i].name === playerData.name) {
            document.getElementById(getCheckboxId(teamIndex, i)).checked = true;
            update(teamIndex, i);
            break;
          }
        }
      }

      function stddev(data) {
        let sum = 0;
        for(let i = 0; i < data.length; i++) {
          sum += data[i];
        }
        let mean = sum / data.length;
        sum = 0;
        for(let i = 0; i < data.length; i++) {
          sum += Math.pow(data[i] - mean, 2);
        }
        let variance = sum / (data.length - 1);
        let sd = Math.sqrt(variance);
        return sd;
      }

      function printDraftTotal() {
        let teamTotals = [];
        let total = 0;
        for(let i = 0; i < numberOfTeams; i++) {
          let teamTotal = 0;
          for(let j = 0; j < draftResults[i].length; j++) {
            teamTotal += draftResults[i][j].points;
            total += draftResults[i][j].points;
          }
          teamTotals.push(teamTotal);
        }
        console.log("stddev", stddev(teamTotals));
        console.log("draft total", total);
      }

      function getRemainingPickCount() {
        let total = numberOfTeams * defaultPositions.length;
        let count = 0;
        for(let i = 0; i < numberOfTeams; i++) {
          count += draftResults[i].length;
        }
        return total - count;
      }

      function getNextPick(teamIndex, minimax) {
        let depth = getRemainingPickCount();
        let direction = draftResults[teamIndex].length % 2 === 0 ? 1 : -1;
        let startTime = new Date();
        let endTime = new Date();
        let playerData = getSimplePick(teamIndex);
        if(minimax) {
          console.log("*************************************************************");
          console.log("********** team " + (teamIndex + 1) + " pick " + (draftResults[teamIndex].length + 1) + " **********");
          console.log("*************************************************************");
          for(let i = 0; i < 20 && endTime - startTime < minimaxMaxTime; i++) {
            console.log("********** initial moves " + i);
            getMinimaxPick(depth, -INFINITY, INFINITY, teamIndex, depth, teamIndex, direction, i);
            endTime = new Date();
          }
          playerData = bestMove;
        }
        endTime = new Date();
        console.log("total time", endTime - startTime);
        autoCheckPlayer(teamIndex, playerData);
        printDraftTotal();
      }

      function startTest(teamIndex, direction, minimax) {
        getNextPick(teamIndex, minimax);
        teamIndex = teamIndex + direction;
        if(teamIndex === numberOfTeams || teamIndex === -1) {
          direction = -direction;
          teamIndex = teamIndex + direction;
        }
        if(draftResults[0].length < defaultPositions.length || draftResults[numberOfTeams - 1].length < defaultPositions.length) {
          setTimeout(() => {
            startTest(teamIndex, direction, minimax);
          }, 100);
        }
      }

      function getDraftId(teamIndex, draftIndex) {
        return "team_" + teamIndex + "_draft_" + draftIndex;
      }

      document.write("<table>");
      document.write("<tr class='heading'>");
      for(let i = 0; i < numberOfTeams; i++) {
        document.write("<td>Team " + (i + 1) + "<br><button onclick='getNextPick(" + i + ", false)'>Get Simple Pick</button><br><button onclick='getNextPick(" + i + ", true)'>Get Minimax Pick</button></td>");
      }
      document.write("</tr>");
      for(let i = 0; i < defaultPositions.length; i++) {
        document.write("<tr>");
        for(let j = 0; j < numberOfTeams; j++) {
          document.write("<td id='" + getDraftId(j, i) + "'></td>");
        }
        document.write("</tr>");
      }
      document.write("</table>");

      document.write("<table>");
      for(let i = 0; i < numberOfTeams; i++) {
        document.write("<tr>");
        document.write("<td class='heading'>Team " + (i + 1) + " Total</td>");
        document.write("<td id='" + getTeamId(i) + "'>" + getTeamTotal(i) + "</td>");
        document.write("</tr>");
      }
      document.write("</table>");

      document.write("<table>");
      for(let i = 0; i < rawData.length; i++) {
        if(i % 10 === 0) {
          document.write("<tr class='heading'>");
          document.write("<td>Player</td>");
          document.write("<td>Postions</td>");
          document.write("<td>Points</td>");
          for(let i = 0; i < numberOfTeams; i++) {
            document.write("<td>Team " + (i + 1) + "</td>");
          }
          document.write("</tr>");
        }
        document.write("<tr>");
        document.write("<td>" + rawData[i].name + "</td>");
        document.write("<td>" + rawData[i].positions + "</td>");
        document.write("<td>" + rawData[i].points + "</td>");
        for(let j = 0; j < numberOfTeams; j++) {
          document.write("<td><input type='checkbox' id='" + getCheckboxId(j, i) + "' onclick='update(" + j + ", " + i + ")'></td>");
        }
        document.write("</tr>");
      }
      document.write("</table>");

      document.write("<table>");
      document.write("<tr>");
      document.write("<td><button onclick='startTest(0, 1, false)'>Start Simple Simulation</button></td>");
      document.write("</tr>");
      document.write("<tr>");
      document.write("<td><button onclick='startTest(0, 1, true)'>Start Minimax Simulation</button></td>");
      document.write("</tr>");
      document.write("</table>");
    </script>
  </body>
</html>
