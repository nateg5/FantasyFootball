<html>
  <head>
    <style>
      table {
        border-collapse: collapse;
        float: left;
        margin: 10px;
      }
      table td {
        border: 1px solid #888;
        padding: 10px;
      }
      .heading {
        font-weight: bold;
        background-color: #eee;
      }
    </style>
  </head>
  <body>
    <script>
      let QB = 0, RB = 1, WR = 2, TE = 3, FL = 4, K = 5, DEF = 6;
      let rawData = [
      {name: "Jayden Daniels", positions: [QB], points: 389.23, available: true},
{name: "Lamar Jackson", positions: [QB], points: 372.44, available: true},
{name: "Josh Allen", positions: [QB], points: 367.93, available: true},
{name: "Joe Burrow", positions: [QB], points: 365.48, available: true},
{name: "Jalen Hurts", positions: [QB], points: 355.56, available: true},
{name: "CeeDee Lamb", positions: [WR], points: 340.05, available: true},
{name: "Patrick Mahomes", positions: [QB], points: 339.49, available: true},
{name: "Kyler Murray", positions: [QB], points: 334.65, available: true},
{name: "Dak Prescott", positions: [QB], points: 330.04, available: true},
{name: "Baker Mayfield", positions: [QB], points: 323.41, available: true},
{name: "Justin Fields", positions: [QB], points: 320.99, available: true},
{name: "Ja'Marr Chase", positions: [WR], points: 320.09, available: true},
{name: "Jared Goff", positions: [QB], points: 316.37, available: true},
{name: "Bo Nix", positions: [QB], points: 314.94, available: true},
{name: "Justin Herbert", positions: [QB], points: 313.04, available: true},
{name: "Geno Smith", positions: [QB], points: 311.03, available: true},
{name: "Tua Tagovailoa", positions: [QB], points: 309.97, available: true},
{name: "Drake Maye", positions: [QB], points: 305.9, available: true},
{name: "Trevor Lawrence", positions: [QB], points: 304.82, available: true},
{name: "Jordan Love", positions: [QB], points: 301.93, available: true},
{name: "J.J. McCarthy", positions: [QB], points: 299.82, available: true},
{name: "Jaxon Smith-Njigba", positions: [WR], points: 298.18, available: true},
{name: "Brock PurdyD", positions: [QB], points: 297.03, available: true},
{name: "Daniel Jones", positions: [QB], points: 296.01, available: true},
{name: "C.J. Stroud", positions: [QB], points: 294.7, available: true},
{name: "Puka Nacua", positions: [WR], points: 294.17, available: true},
{name: "Caleb Williams", positions: [QB], points: 293.13, available: true},
{name: "Bucky Irving", positions: [RB], points: 291.29, available: true},
{name: "Drake LondonQ", positions: [WR], points: 290.49, available: true},
{name: "Matthew Stafford", positions: [QB], points: 287.99, available: true},
{name: "Sam Darnold", positions: [QB], points: 286.81, available: true},
{name: "Saquon Barkley", positions: [RB], points: 286.38, available: true},
{name: "De'Von Achane", positions: [RB], points: 282.47, available: true},
{name: "Chase Brown", positions: [RB], points: 281.34, available: true},
{name: "Bijan Robinson", positions: [RB], points: 281.31, available: true},
{name: "Michael Penix Jr.", positions: [QB], points: 279.96, available: true},
{name: "Jahmyr Gibbs", positions: [RB], points: 277.08, available: true},
{name: "Ashton Jeanty", positions: [RB], points: 276.23, available: true},
{name: "Joe Flacco", positions: [QB], points: 274.72, available: true},
{name: "Justin Jefferson", positions: [WR], points: 272.1, available: true},
{name: "Malik Nabers", positions: [WR], points: 271.53, available: true},
{name: "Aaron Rodgers", positions: [QB], points: 271.28, available: true},
{name: "Jakobi Meyers", positions: [WR], points: 270.3, available: true},
{name: "Nico Collins", positions: [WR], points: 268.47, available: true},
{name: "Christian McCaffrey", positions: [RB], points: 266.95, available: true},
{name: "Bryce Young", positions: [QB], points: 266.84, available: true},
{name: "Tetairoa McMillan", positions: [WR], points: 266.75, available: true},
{name: "Jonathan Taylor", positions: [RB], points: 262.89, available: true},
{name: "Cam Ward", positions: [QB], points: 261.8, available: true},
{name: "Derrick Henry", positions: [RB], points: 260.41, available: true},
{name: "Brian Thomas Jr.", positions: [WR], points: 256.97, available: true},
{name: "Ladd McConkey", positions: [WR], points: 256.61, available: true},
{name: "Amon-Ra St. Brown", positions: [WR], points: 255.78, available: true},
{name: "Josh Jacobs", positions: [RB], points: 255.27, available: true},
{name: "Russell Wilson", positions: [QB], points: 254.08, available: true},
{name: "Marvin Harrison Jr.", positions: [WR], points: 253.65, available: true},
{name: "Brock BowersQ", positions: [TE], points: 249.76, available: true},
{name: "Calvin Ridley", positions: [WR], points: 249.13, available: true},
{name: "Tee Higgins", positions: [WR], points: 244.7, available: true},
{name: "DJ Moore", positions: [WR], points: 244.59, available: true},
{name: "Kyren Williams", positions: [RB], points: 244.33, available: true},
{name: "Trey McBride", positions: [TE], points: 240.37, available: true},
{name: "Alvin Kamara", positions: [RB], points: 238.97, available: true},
{name: "Tyreek Hill", positions: [WR], points: 237.87, available: true},
{name: "Spencer Rattler", positions: [QB], points: 235.19, available: true},
{name: "George Pickens", positions: [WR], points: 233.38, available: true},
{name: "Mike Evans", positions: [WR], points: 230.56, available: true},
{name: "DK Metcalf", positions: [WR], points: 230.15, available: true},
{name: "Deebo Samuel", positions: [WR], points: 226.84, available: true},
{name: "Davante Adams", positions: [WR], points: 226.65, available: true},
{name: "Zay Flowers", positions: [WR], points: 225.02, available: true},
{name: "Garrett Wilson", positions: [WR], points: 223.55, available: true},
{name: "Courtland Sutton", positions: [WR], points: 222.52, available: true},
{name: "A.J. Brown", positions: [WR], points: 221.55, available: true},
{name: "Chuba Hubbard", positions: [RB], points: 220.26, available: true},
{name: "James Conner", positions: [RB], points: 220.1, available: true},
{name: "James Cook", positions: [RB], points: 219.95, available: true},
{name: "Breece Hall", positions: [RB], points: 219.09, available: true},
{name: "Tony Pollard", positions: [RB], points: 218.37, available: true},
{name: "Jerry Jeudy", positions: [WR], points: 216.8, available: true},
{name: "Rashee RiceSUSP", positions: [WR], points: 214.5, available: true},
{name: "Travis Hunter", positions: [WR], points: 213.9, available: true},
{name: "Stefon Diggs", positions: [WR], points: 213.78, available: true},
{name: "Omarion Hampton", positions: [RB], points: 210.48, available: true},
{name: "DeVonta Smith", positions: [WR], points: 208.28, available: true},
{name: "D'Andre Swift", positions: [RB], points: 207.85, available: true},
{name: "Jaylen WaddleQ", positions: [WR], points: 207.58, available: true},
{name: "Kenneth Walker III", positions: [RB], points: 207.23, available: true},
{name: "Terry McLaurin", positions: [WR], points: 206.98, available: true},
{name: "Matthew Golden", positions: [WR], points: 202.65, available: true},
{name: "Emeka Egbuka", positions: [WR], points: 200.64, available: true},
{name: "Ricky Pearsall", positions: [WR], points: 197.3, available: true},
{name: "Chris Olave", positions: [WR], points: 194.75, available: true},
{name: "Xavier WorthyQ", positions: [WR], points: 191.01, available: true},
{name: "Jameson Williams", positions: [WR], points: 188.97, available: true},
{name: "Rome Odunze", positions: [WR], points: 188.46, available: true},
{name: "TreVeyon Henderson", positions: [RB], points: 185.27, available: true},
{name: "Travis Kelce", positions: [TE], points: 184.81, available: true},
{name: "Cooper Kupp", positions: [WR], points: 183.31, available: true},
{name: "David Montgomery", positions: [RB], points: 182.97, available: true},
{name: "Travis Etienne Jr.", positions: [RB], points: 182.19, available: true},
{name: "Rashid Shaheed", positions: [WR], points: 180.44, available: true},
{name: "Javonte Williams", positions: [RB], points: 179.25, available: true},
{name: "Jauan JenningsQ", positions: [WR], points: 178.64, available: true},
{name: "Michael Pittman Jr.", positions: [WR], points: 178.35, available: true},
{name: "Austin Ekeler", positions: [RB], points: 178.24, available: true},
{name: "Sam LaPorta", positions: [TE], points: 178.01, available: true},
{name: "Tyrone Tracy Jr.", positions: [RB], points: 176.42, available: true},
{name: "David Njoku", positions: [TE], points: 173.11, available: true},
{name: "Jaylen Warren", positions: [RB], points: 172.86, available: true},
{name: "Khalil Shakir", positions: [WR], points: 172.27, available: true},
{name: "Darnell MooneyQ", positions: [WR], points: 171.79, available: true},
{name: "Aaron Jones Sr.", positions: [RB], points: 171.35, available: true},
{name: "Keon Coleman", positions: [WR], points: 170.8, available: true},
{name: "Isiah Pacheco", positions: [RB], points: 169.84, available: true},
{name: "Cedric Tillman", positions: [WR], points: 165.25, available: true},
{name: "George KittleIR", positions: [TE], points: 164.03, available: true},
{name: "Jordan AddisonSUSP", positions: [WR], points: 159.79, available: true},
{name: "Jordan Mason", positions: [RB], points: 157.8, available: true},
{name: "Christian KirkQ", positions: [WR], points: 156.98, available: true},
{name: "J.K. Dobbins", positions: [RB], points: 156.08, available: true},
{name: "Josh Downs", positions: [WR], points: 155.65, available: true},
{name: "Marvin Mims Jr.", positions: [WR], points: 154.34, available: true},
{name: "Wan'Dale RobinsonQ", positions: [WR], points: 153.97, available: true},
{name: "RJ Harvey", positions: [RB], points: 151.95, available: true},
{name: "Jayden Reed", positions: [WR], points: 151.53, available: true},
{name: "Zach Charbonnet", positions: [RB], points: 150.72, available: true},
{name: "T.J. Hockenson", positions: [TE], points: 148.91, available: true},
{name: "Chris Godwin Jr.D", positions: [WR], points: 145.43, available: true},
{name: "Kaleb Johnson", positions: [RB], points: 143.41, available: true},
{name: "Tucker Kraft", positions: [TE], points: 142.67, available: true},
{name: "Evan EngramQ", positions: [TE], points: 142.65, available: true},
{name: "Dallas GoedertQ", positions: [TE], points: 141.98, available: true},
{name: "Xavier Legette", positions: [WR], points: 138.15, available: true},
{name: "Tyler Warren", positions: [TE], points: 138.07, available: true},
{name: "Mark Andrews", positions: [TE], points: 137.56, available: true},
{name: "Keenan Allen", positions: [WR], points: 135.48, available: true},
{name: "Jake Ferguson", positions: [TE], points: 134.86, available: true},
{name: "Zach Ertz", positions: [TE], points: 134.85, available: true},
{name: "Rashod Bateman", positions: [WR], points: 131.65, available: true},
{name: "Jacory Croskey-Merritt", positions: [RB], points: 130.46, available: true},
{name: "Dalton Kincaid", positions: [TE], points: 130.27, available: true},
{name: "Rhamondre Stevenson", positions: [RB], points: 130.23, available: true},
{name: "Joe MixonNFI-R", positions: [RB], points: 130.01, available: true},
{name: "DeMario Douglas", positions: [WR], points: 129.84, available: true},
{name: "Hollywood Brown", positions: [WR], points: 129.48, available: true},
{name: "Chig Okonkwo", positions: [TE], points: 127.63, available: true},
{name: "Romeo Doubs", positions: [WR], points: 127.5, available: true},
{name: "Brenton Strange", positions: [TE], points: 127.26, available: true},
{name: "Hunter Henry", positions: [TE], points: 126.6, available: true},
{name: "Joshua Palmer", positions: [WR], points: 126.43, available: true},
{name: "Cam Skattebo", positions: [RB], points: 126.35, available: true},
{name: "Pat Freiermuth", positions: [TE], points: 125.91, available: true},
{name: "Michael Wilson", positions: [WR], points: 125.69, available: true},
{name: "Calvin Austin III", positions: [WR], points: 125.58, available: true},
{name: "Kyle Pitts Sr.", positions: [TE], points: 122.21, available: true},
{name: "Jonnu Smith", positions: [TE], points: 120.01, available: true},
{name: "Mason TaylorQ", positions: [TE], points: 116.82, available: true},
{name: "Dalton Schultz", positions: [TE], points: 116.54, available: true},
{name: "Jayden Higgins", positions: [WR], points: 113.68, available: true},
{name: "Mike Gesicki", positions: [TE], points: 113.11, available: true},
{name: "Tre' Harris", positions: [WR], points: 113.05, available: true},
{name: "Cade Otton", positions: [TE], points: 112.61, available: true},
{name: "Quentin Johnston", positions: [WR], points: 109.34, available: true},
{name: "Tyler Lockett", positions: [WR], points: 108.35, available: true},
{name: "Colston Loveland", positions: [TE], points: 107.57, available: true},
{name: "Bhayshul Tuten", positions: [RB], points: 106.8, available: true},
{name: "Trey Benson", positions: [RB], points: 105.92, available: true},
{name: "Diontae JohnsonNA", positions: [WR], points: 105.84, available: true},
{name: "Nick Chubb", positions: [RB], points: 105.57, available: true},
{name: "Elic Ayomanor", positions: [WR], points: 104.55, available: true},
{name: "Adam Thielen", positions: [WR], points: 103.93, available: true},
{name: "Theo Johnson", positions: [TE], points: 103.83, available: true},
{name: "Alec Pierce", positions: [WR], points: 103.5, available: true},
{name: "Brandon AiyukPUP-R", positions: [WR], points: 103.14, available: true},
{name: "Dylan Sampson", positions: [RB], points: 103.12, available: true},
{name: "Dyami Brown", positions: [WR], points: 102.93, available: true},
{name: "Jerome Ford", positions: [RB], points: 102.74, available: true},
{name: "Juwan Johnson", positions: [TE], points: 102.54, available: true},
{name: "Darius SlaytonQ", positions: [WR], points: 99.4, available: true},
{name: "Brian Robinson Jr.", positions: [RB], points: 99.07, available: true},
{name: "Tutu Atwell", positions: [WR], points: 98.63, available: true},
{name: "Darren WallerQ", positions: [TE], points: 97.5, available: true},
{name: "Tyler Allgeier", positions: [RB], points: 97.1, available: true},
{name: "Harold Fannin Jr.", positions: [TE], points: 95.71, available: true},
{name: "Tre Tucker", positions: [WR], points: 94.66, available: true},
{name: "Dont'e Thornton Jr.", positions: [WR], points: 94.38, available: true},
{name: "Rachaad White", positions: [RB], points: 93.17, available: true},
{name: "Tyjae SpearsIR-R", positions: [RB], points: 91.49, available: true},
{name: "Kyle Williams", positions: [WR], points: 91.41, available: true},
{name: "Kareem Hunt", positions: [RB], points: 91.22, available: true},
{name: "Troy Franklin", positions: [WR], points: 91.09, available: true},
{name: "Ja'Tavion Sanders", positions: [TE], points: 90.87, available: true},
{name: "Josh ReynoldsQ", positions: [WR], points: 89.95, available: true},
{name: "Kenneth Gainwell", positions: [RB], points: 89.83, available: true},
{name: "Najee Harris", positions: [RB], points: 88.88, available: true},
{name: "Nick Westbrook-Ikhine", positions: [WR], points: 88.87, available: true},
{name: "Braelon Allen", positions: [RB], points: 88.56, available: true},
{name: "Quinshon JudkinsO", positions: [RB], points: 88.07, available: true},
{name: "Tyler Higbee", positions: [TE], points: 88.01, available: true},
{name: "Brandon Aubrey", positions: [K], points: 149.97, available: true},
{name: "Tyler Loop", positions: [K], points: 143.14, available: true},
{name: "Jake Bates", positions: [K], points: 140.99, available: true},
{name: "Daniel Carlson", positions: [K], points: 140.39, available: true},
{name: "Cameron Dicker", positions: [K], points: 140.38, available: true},
{name: "Wil Lutz", positions: [K], points: 140.19, available: true},
{name: "Evan McPherson", positions: [K], points: 140.07, available: true},
{name: "Chase McLaughlin", positions: [K], points: 139.5, available: true},
{name: "Chad Ryland", positions: [K], points: 139.01, available: true},
{name: "Ka'imi Fairbairn", positions: [K], points: 137.36, available: true},
{name: "Harrison Butker", positions: [K], points: 137.35, available: true},
{name: "Brandon McManus", positions: [K], points: 136.39, available: true},
{name: "Cam Little", positions: [K], points: 136.26, available: true},
{name: "Chris Boswell", positions: [K], points: 135.63, available: true},
{name: "Joshua Karty", positions: [K], points: 135.57, available: true},
{name: "Matt Gay", positions: [K], points: 135.42, available: true},
{name: "Jake Elliott", positions: [K], points: 134.59, available: true},
{name: "Will Reichard", positions: [K], points: 134.31, available: true},
{name: "Younghoe Koo", positions: [K], points: 133.13, available: true},
{name: "Cairo Santos", positions: [K], points: 129.16, available: true},
{name: "Jason Myers", positions: [K], points: 128.59, available: true},
{name: "Eddy Pineiro", positions: [K], points: 128.47, available: true},
{name: "Spencer Shrader", positions: [K], points: 125.36, available: true},
{name: "Andre Szmyt", positions: [K], points: 125.27, available: true},
{name: "Blake Grupe", positions: [K], points: 124.71, available: true},
{name: "Pittsburgh", positions: [DEF], points: 113.36, available: true},
{name: "Denver", positions: [DEF], points: 110.36, available: true},
{name: "Baltimore", positions: [DEF], points: 110.07, available: true},
{name: "Houston", positions: [DEF], points: 108.14, available: true},
{name: "Seattle", positions: [DEF], points: 105.73, available: true},
{name: "Buffalo", positions: [DEF], points: 104.22, available: true},
{name: "Los Angeles", positions: [DEF], points: 103.94, available: true},
{name: "Philadelphia", positions: [DEF], points: 100.86, available: true},
{name: "Tampa Bay", positions: [DEF], points: 100.59, available: true},
{name: "Indianapolis", positions: [DEF], points: 99.72, available: true},
{name: "Miami", positions: [DEF], points: 99.02, available: true},
{name: "San Francisco", positions: [DEF], points: 98.97, available: true},
{name: "Detroit", positions: [DEF], points: 98.66, available: true},
{name: "New Orleans", positions: [DEF], points: 97.04, available: true},
{name: "Dallas", positions: [DEF], points: 96.78, available: true},
{name: "Arizona", positions: [DEF], points: 96.56, available: true},
{name: "Kansas City", positions: [DEF], points: 96.56, available: true},
{name: "Green Bay", positions: [DEF], points: 96.41, available: true},
{name: "Minnesota", positions: [DEF], points: 96, available: true},
{name: "New England", positions: [DEF], points: 95.41, available: true},
{name: "New York", positions: [DEF], points: 94.95, available: true},
{name: "Cleveland", positions: [DEF], points: 94.88, available: true},
{name: "Los Angeles", positions: [DEF], points: 94.76, available: true},
{name: "Tennessee", positions: [DEF], points: 93.97, available: true},
{name: "New York", positions: [DEF], points: 93.62, available: true},
      ];
	  rawData.sort((a, b) => b.points - a.points);
      let rawDataPositionsMap = [
        [],
        [],
        [],
        [],
        [],
        [],
        []
      ];

      let searchArray = location.search.substring(1).split("&");
      let params = {};
      for(let i in searchArray) {
        let param = searchArray[i].split("=");
        params[param[0]] = Number(param[1]);
      }
      let numberOfTeams = params.numberOfTeams || 10;

      let numberOfStarters = 9;
      let defaultPositions = [QB, RB, RB, WR, WR, TE, FL, K, DEF, QB, RB, WR, TE, FL, K, DEF];
      let bestAvailablePlayerMap = [];
      let draftResults = [];

      for(let i = 0; i < rawData.length; i++) {
		if(rawData[i].positions.indexOf(WR) >= 0 || rawData[i].positions.indexOf(RB) >= 0 || rawData[i].positions.indexOf(TE) >= 0) {
			rawData[i].positions.push(FL);
		}
        rawData[i].positionsString = "" + rawData[i].positions;
        rawData[i].nextPlayer = {};
        for(let j = 0; j < rawData[i].positions.length; j++) {
          rawDataPositionsMap[rawData[i].positions[j]].push(rawData[i]);
          let lastIndex = rawDataPositionsMap[rawData[i].positions[j]].length - 1;
          if(lastIndex > 0) {
            rawDataPositionsMap[rawData[i].positions[j]][lastIndex - 1].nextPlayer[rawData[i].positions[j]] = rawDataPositionsMap[rawData[i].positions[j]][lastIndex];
          } else {
            bestAvailablePlayerMap[rawData[i].positions[j]] = rawData[i];
          }
        }
      }
      console.log(rawData);
      console.log(rawDataPositionsMap);
      console.log(bestAvailablePlayerMap);

      for(let i = 0; i < numberOfTeams; i++) {
        draftResults.push([]);
      }

      function getTeamTotal(teamIndex) {
		let totalPoints = 0;
		let teamPlayers = draftResults[teamIndex].slice();
		teamPlayers.sort((a, b) => b.points - a.points);
		for(let i = 0; i < defaultPositions.length; i++) {
		  for(let j = 0; j < teamPlayers.length; j++) {
		    if(teamPlayers[j].positions.indexOf(defaultPositions[i]) >= 0) {
			  totalPoints += teamPlayers[j].points;
			  teamPlayers.splice(j, 1);
			  break;
			}
		  }
		}
		return totalPoints;
      }

      function getCheckboxId(teamIndex, playerIndex) {
        return "team_" + teamIndex + "_player_" + playerIndex;
      }

      function getTeamId(teamIndex) {
        return "team_" + teamIndex;
      }

      function updateTeamTotal(teamIndex) {
        document.getElementById(getTeamId(teamIndex)).innerHTML = Math.floor(getTeamTotal(teamIndex));
      }

      function updateDraftBoard(teamIndex, playerIndex) {
        if(document.getElementById(getCheckboxId(teamIndex, playerIndex)).checked) {
          let draftIndex = draftResults[teamIndex].indexOf(rawData[playerIndex]);
          if(draftIndex < 0) {
            draftPlayer(teamIndex, rawData[playerIndex]);
          }
        } else {
          let draftIndex = draftResults[teamIndex].indexOf(rawData[playerIndex]);
          if(draftIndex >= 0) {
            undraftPlayer(teamIndex, draftIndex);
          }
        }
        for(let i = 0; i < defaultPositions.length; i++) {
          document.getElementById(getDraftId(teamIndex, i)).innerHTML = "";
        }
        for(let i = 0; i < draftResults[teamIndex].length; i++) {
          document.getElementById(getDraftId(teamIndex, i)).innerHTML = draftResults[teamIndex][i].name + " " + draftResults[teamIndex][i].positions;
        }
      }

      function update(teamIndex, playerIndex) {
        updateDraftBoard(teamIndex, playerIndex);
        updateTeamTotal(teamIndex);
      }

	  function buildMissingPositions(teamPlayersIn) {
		let missingPositions = [];
		let missingPositionsStarter = [];
		let teamPlayers = teamPlayersIn.slice();
		for(let i = 1; i < teamPlayers.length; i++) {
		  for(let j = i; j > 0 && teamPlayers[j-1].points < teamPlayers[j].points; j--) {
		    let tempPlayer = teamPlayers[j-1];
			teamPlayers[j-1] = teamPlayers[j];
			teamPlayers[j] = tempPlayer;
		  }
		}
		for(let i = 0; i < defaultPositions.length; i++) {
		  let found = false;
		  for(let j = 0; j < teamPlayers.length; j++) {
		    if(teamPlayers[j].positions.indexOf(defaultPositions[i]) >= 0) {
			  teamPlayers.splice(j, 1);
			  found = true;
			  break;
			}
		  }
		  if(!found) {
			if(i < numberOfStarters) {
			  missingPositions.push(defaultPositions[i]);
			  missingPositionsStarter.push(true);
			} else {
			  missingPositions.push(defaultPositions[i]);
			  missingPositionsStarter.push(false);
			}
		  }
		}
		for(let i = 0; i < missingPositions.length; i++) {
		  for(let j = missingPositions.length; j > i; j--) {
		    if(missingPositions[i] === missingPositions[j]) {
			  missingPositions.splice(j, 1);
			  missingPositionsStarter.splice(j, 1);
			}
		  }
		}
		let retVal = {missingPositions: missingPositions, missingPositionsStarter: missingPositionsStarter};
		return retVal;
	  }

      function getSimplePick(teamIndex) {
        let teamPlayers = draftResults[teamIndex];
        let {missingPositions, missingPositionsStarter} = buildMissingPositions(teamPlayers);
		return buildMoves(missingPositions, missingPositionsStarter)[0];
      }

      function buildMoves(missingPositions, missingPositionsStarter) {
        let moves = [];
		let movesWithStarter = [];
        for(let i = 0; i < missingPositions.length; i++) {
          let positionsMap = rawDataPositionsMap[missingPositions[i]];
          for(let j = 0; j < positionsMap.length; j++) {
            let playerData = positionsMap[j];
            if(playerData.available === true) {
              if(moves.indexOf(playerData) < 0) {
                moves.push(playerData);
				movesWithStarter.push({playerData: playerData, starter: missingPositionsStarter[i]});
                break;
              }
              break;
            }
          }
        }
		
		for(let i = 1; i < movesWithStarter.length; i++) {
		  for(let j = i; j > 0; j--) {
		    let a = movesWithStarter[j-1];
			let b = movesWithStarter[j];
		    let aPoints, bPoints;
			aPoints = a.playerData.points;
			bPoints = b.playerData.points;
			if(aPoints < bPoints) {
			  let tempMove = movesWithStarter[j-1];
			  movesWithStarter[j-1] = movesWithStarter[j];
			  movesWithStarter[j] = tempMove;
			} else {
			  break;
			}
		  } 
		}

        moves = movesWithStarter.map((item) => item.playerData);

        return moves;
      }

      function draftPlayer(teamIndex, playerData) {
        draftResults[teamIndex].push(playerData);
        playerData.available = false;
      }

      function undraftPlayer(teamIndex, draftIndex) {
        let playerData = {};
        if(draftIndex === draftResults[teamIndex].length - 1) {
          playerData = draftResults[teamIndex].pop();
        } else {
          playerData = draftResults[teamIndex].splice(draftIndex, 1)[0];
        }
        playerData.available = true;
      }

      function autoCheckPlayer(teamIndex, playerData) {
        for(let i = 0; i < rawData.length; i++) {
          if(rawData[i].name === playerData.name) {
            document.getElementById(getCheckboxId(teamIndex, i)).checked = true;
            update(teamIndex, i);
            break;
          }
        }
      }

      function stddev(data) {
        let sum = 0;
        for(let i = 0; i < data.length; i++) {
          sum += data[i];
        }
        let mean = sum / data.length;
        sum = 0;
        for(let i = 0; i < data.length; i++) {
          sum += Math.pow(data[i] - mean, 2);
        }
        let variance = sum / (data.length - 1);
        let sd = Math.sqrt(variance);
        return sd;
      }

      function printDraftTotal() {
        let teamTotals = [];
        let total = 0;
        for(let i = 0; i < numberOfTeams; i++) {
          let teamTotal = getTeamTotal(i);
		  total += teamTotal;
          teamTotals.push(teamTotal);
        }
        console.log("stddev", stddev(teamTotals));
        console.log("draft total", total);
      }

      function getNextPick(teamIndex, intelliPick) {
        let direction = draftResults[teamIndex].length % 2 === 0 ? 1 : -1;
        let startTime = new Date();
        let endTime = new Date();
        let playerData = getSimplePick(teamIndex);
        if(intelliPick) {
          console.log("*************************************************************");
          console.log("********** team " + (teamIndex + 1) + " pick " + (draftResults[teamIndex].length + 1) + " **********");
          console.log("*************************************************************");
          playerData = getSimplePick(teamIndex);
        }
        endTime = new Date();
        console.log("total time", endTime - startTime);
        autoCheckPlayer(teamIndex, playerData);
        printDraftTotal();
      }

      function startTest(teamIndex, direction, intelliPick) {
        getNextPick(teamIndex, intelliPick);
        teamIndex = teamIndex + direction;
        if(teamIndex === numberOfTeams || teamIndex === -1) {
          direction = -direction;
          teamIndex = teamIndex + direction;
        }
        if(draftResults[0].length < defaultPositions.length || draftResults[numberOfTeams - 1].length < defaultPositions.length) {
          setTimeout(() => {
            startTest(teamIndex, direction, intelliPick);
          }, 100);
        }
      }

      function getDraftId(teamIndex, draftIndex) {
        return "team_" + teamIndex + "_draft_" + draftIndex;
      }

	  document.write("<a href='https://docs.google.com/spreadsheets/d/1Bl0_l69Mq2D54jZcEWvhtBdOop42gO5DWGgj9wZMxyw/edit?gid=418588621#gid=418588621'>Spreadsheet for parsing raw data</a><br>");
      document.write("<table>");
      document.write("<tr class='heading'>");
      for(let i = 0; i < numberOfTeams; i++) {
        document.write("<td>Team " + (i + 1) + "<br><button onclick='getNextPick(" + i + ", false)'>Get Simple Pick</button><br><button onclick='getNextPick(" + i + ", true)'>Get Minimax Pick</button></td>");
      }
      document.write("</tr>");
      for(let i = 0; i < defaultPositions.length; i++) {
        document.write("<tr>");
        for(let j = 0; j < numberOfTeams; j++) {
          document.write("<td id='" + getDraftId(j, i) + "'></td>");
        }
        document.write("</tr>");
      }
      document.write("</table>");

      document.write("<table>");
      for(let i = 0; i < numberOfTeams; i++) {
        document.write("<tr>");
        document.write("<td class='heading'>Team " + (i + 1) + " Total</td>");
        document.write("<td id='" + getTeamId(i) + "'>" + getTeamTotal(i) + "</td>");
        document.write("</tr>");
      }
      document.write("</table>");

      document.write("<table>");
      for(let i = 0; i < rawData.length; i++) {
        if(i % 10 === 0) {
          document.write("<tr class='heading'>");
          document.write("<td>Player</td>");
          document.write("<td>Postions</td>");
          document.write("<td>Points</td>");
          for(let i = 0; i < numberOfTeams; i++) {
            document.write("<td>Team " + (i + 1) + "</td>");
          }
          document.write("</tr>");
        }
        document.write("<tr>");
        document.write("<td>" + rawData[i].name + "</td>");
        document.write("<td>" + rawData[i].positions + "</td>");
        document.write("<td>" + rawData[i].points + "</td>");
        for(let j = 0; j < numberOfTeams; j++) {
          document.write("<td><input type='checkbox' id='" + getCheckboxId(j, i) + "' onclick='update(" + j + ", " + i + ")'></td>");
        }
        document.write("</tr>");
      }
      document.write("</table>");

      document.write("<table>");
      document.write("<tr>");
      document.write("<td><button onclick='startTest(0, 1, false)'>Start Simple Simulation</button></td>");
      document.write("</tr>");
      document.write("<tr>");
      document.write("<td><button onclick='startTest(0, 1, true)'>Start Minimax Simulation</button></td>");
      document.write("</tr>");
      document.write("</table>");
    </script>
  </body>
</html>
